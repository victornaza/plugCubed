/*
 Copyright (c) 2012-2013 by Jeremy "Colgate" Richardson and Thomas "TAT" Andresen

 Permission to use and/or distribute this software or parts of it for any purpose without
 fee is hereby granted, provided that the above copyright notice and this permission notice
 appear in all copies.

 Permission to copy and/or edit this software or parts of it for any purpose is NOT permitted
 without written permission by the authors.

 THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHORS DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE
 INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHORS
 BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER
 RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
 OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.

 @author  Jeremy "Colgate" Richardson
 @author  Thomas "TAT" Andresen
*/
var d=void 0,e=!0,f=null,g=!1;"undefined"!==typeof plugCubed&&plugCubed.close();"undefined"===typeof _avatarTick&&(_avatarTick=avatarTick);Math.Sa=function(){return 1+Math.floor(10*Math.random())};Emoji.H=Emoji.emojify;
console.info=function(a){console.log(a);q!==d?(log('<span style="color:#FF0000">'+plugCubed.d("disconnected",[plugCubed.S()])+" "+plugCubed.d("reloading")+"</span>"),setTimeout(function(){location.reload(e)},3E3)):s||(s=e,log('<span style="color:#FF0000">'+plugCubed.d("disconnected",[plugCubed.S()])+"</span>"))};
var q,s=g,u=Class.extend({L:{},R:function(){return"undefined"!==typeof pdpSocket&&"http://socket.plugpony.net:9000/gateway"===pdpSocket._base_url},version:{major:1,minor:7,patch:0,ra:"alpha.2a",toString:function(){return this.major+"."+this.minor+"."+this.patch+(this.ra!==d?"-"+this.ra:"")}},init:function(){this.proxy={menu:$.proxy(this.onMenuClick,this),W:$.proxy(this.W,this),onVoteUpdate:$.proxy(this.onVoteUpdate,this),V:$.proxy(this.V,this),X:$.proxy(this.X,this),Y:$.proxy(this.Y,this),U:$.proxy(this.U,
this),i:$.proxy(this.i,this),z:$.proxy(this.z,this)};localStorage.ca!==d&&($.getScript("https://rawgithub.com/TATDK/plugCubed/1.7.0/langs/lang."+localStorage.ca+".js",$.proxy(this.Ba,this)),"undefined"===typeof jQuery.fn.tabs&&($.getScript("http://code.jquery.com/ui/1.10.2/jquery-ui.js"),$("head").append('<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />')))},d:function(a,b){var c=this.lang,h;a=a.split(".");for(h in a){if(c[a[h]]===d)return"{"+a.join(".")+
"}";c=c[a[h]]}if(b)for(h in b)c=c.split("%"+(~~h+1)).join(b[h]);return c},Ba:function(){this.oa=g;this.colors={Ta:"66FFFF",pa:"FF0000",D:"FFFF00",g:"66FFFF"};this.la=this.d("AFK");setTimeout(function(){plugCubed.history=[];plugCubed.Ea()},1);this.Q=$('<style type="text/css"></css>');$("head").append(this.Q);this.log(this.d("running",[this.version.toString()]),f,this.colors.D);this.log(this.d("commandsHelp"),f,this.colors.g);Dialog.ta=function(a,b){this.closeDialog();var c=a;b!==d&&(c='<div id="plugCubedCommands"><ul><li><a href="#user">'+
plugCubed.d("userCommands")+'</a></li><li><a href="#mod">'+plugCubed.d("modCommands")+'</a></li></ul><div id="user">'+a+'</div><div id="mod">'+b+"</div></div>");this.showDialog($("<div/>").attr("id","dialog-alert").addClass("dialog").css("left",Main.LEFT+(Main.WIDTH-620-15)/2).css("top",200).width(645).height(470).append(this.getHeader(plugCubed.d("commandsTitle"))).append($("<div/>").addClass("dialog-body").append(this.getMessage(c).width(620))));$("#plugCubedCommands").tabs()};socket.chat=function(a){var b=
Math.floor(4294967295*Math.random()).toString(16);this.send({type:"chat",msg:a,chatID:b});"undefined"!==typeof plugCubed&&plugCubed.u.send(JSON.stringify({type:"chat",msg:a,chatID:b}));return b};Lobby.onRoomSelectResponse=function(a){this.spin(g);this.pendingLoad=g;var b=this.data.length;this.lastCursor=a.cursor;if(0==a.results.length)this.endOfList=e;else if((this.data=this.data.concat(a.results))&&0<this.data.length){this.roomList||(this.roomList=$("<ul/>").addClass("room-list"));a=this.data.length;
for(var c=b;c<a;++c){var l=this.data[c],m=$("<div/>").addClass("room-population").append($("<span/>").addClass("room-population-value").text(l.userCount)).append($("<span/>").addClass("room-population-label").html(Lang.lobby.population)),p=$("<div/>").addClass("meta").append($("<span/>").addClass("room-name").text(l.name)).append($("<span/>").addClass("room-hosted-by").text(Lang.lobby.hostedBy)).append($("<span/>").addClass("room-host-name").text(l.host));l.media&&p.append($("<span/>").addClass("room-now-playing").text(Lang.lobby.nowPlaying)).append($("<span/>").addClass("room-media").text(l.media));
var n=$("<div/>").addClass("room-djs");if(5>l.djCount){var t;t=4==l.djCount?Lang.lobby.slotAvailable:Lang.lobby.slotsAvailable.split("%COUNT%").join(""+(5-l.djCount));n.append($("<span/>").addClass("room-djs-label").text(t))}else n.append($("<span/>").addClass("room-djs-label").text(Lang.lobby.noSlots));p.append(n);l.friends&&0<l.friends.length&&l.userCount&&(n=1==l.friends.length?Lang.lobby.friendInHere:Lang.lobby.friendsInHere.split("%COUNT%").join(""+l.friends.length),p.append($("<div/>").addClass("room-friends").append($("<span/>").addClass("room-friends-label").text(n)).attr("title",
l.friends.join(", "))));l=$("<li/>").addClass("room-list-item").data("index",c).data("room",l).mouseenter($.proxy(this.onRoomOver,this)).mouseleave($.proxy(this.onRoomOut,this)).click($.proxy(this.onRoomClick,this)).append(m).append(p);1==c%2?l.addClass("alternate-cell"):l.removeClass("alternate-cell");this.roomList.append(l)}0==b&&this.lobbyPanelList.append(this.roomList);this.posLobbyLabels()}else Dialog.alert(Lang.alerts.roomNotFound)};Models.chat.G===d&&(Models.chat.G=Models.chat.chatCommand);
ChatModel.G===d&&(ChatModel.G=ChatModel.chatCommand);Models.chat.chatCommand=this.ka;ChatModel.chatCommand=this.ka;this.Ja();$("body").prepend('<link rel="stylesheet" type="text/css" id="plugcubed-css" href="https://rawgithub.com/TATDK/plugCubed/1.7.0/plugCubed.css" />');$("body").append('<div id="side-left" class="sidebar"><div class="sidebar-content"></div></div><div id="side-right" class="sidebar"><div class="sidebar-handle"><span>||</span></div><div class="sidebar-content"></div></div>').append('<script type="text/javascript" src="https://rawgithub.com/TATDK/plugCubed/1.7.0/thirdparty.js">\x3c/script>');
this.Ga();this.Fa();this.settings.userlist?(this.Z(),this.da()):this.ma();var a=API.getUsers(),b;for(b in a){var c=a[b];c.A===d&&(c.A=0);c.F===d&&(c.F=0);c.C===d&&(c.C=0);c.joinTime===d&&(c.joinTime=this.S())}SocketListener.chat=function(a){if("undefined"!==typeof plugCubed&&a.fromID&&-1<plugCubed.settings.M.indexOf(a.fromID))return plugCubed.ia(a);Models.chat.receive(a);API.delayDispatch(API.CHAT,a)};EXT||(EXT={});EXT.onRoomJoined?(EXT.ga||(EXT.ga=EXT.onRoomJoined),EXT.onRoomJoined=function(){"undefined"!==
typeof plugCubed&&(plugCubed.close(),plugCubed=new u);EXT.ga()}):EXT.onRoomJoined=function(){"undefined"!==typeof plugCubed&&(plugCubed.close(),plugCubed=new u)};this.fa()},close:function(){Models.chat.chatCommand=Models.chat.G;ChatModel.chatCommand=ChatModel.G;API.removeEventListener(API.DJ_ADVANCE,this.proxy.W);API.removeEventListener(API.VOTE_UPDATE,this.proxy.onVoteUpdate);API.removeEventListener(API.CURATE_UPDATE,this.proxy.V);API.removeEventListener(API.USER_JOIN,this.proxy.X);API.removeEventListener(API.USER_LEAVE,
this.proxy.Y);API.removeEventListener(API.CHAT,this.proxy.U);API.removeEventListener(API.VOTE_SKIP,this.proxy.z);API.removeEventListener(API.USER_SKIP,this.proxy.z);API.removeEventListener(API.MOD_SKIP,this.proxy.z);API.removeEventListener(API.WAIT_LIST_UPDATE,this.proxy.i);API.removeEventListener("userUpdate",this.proxy.i);for(var a in plugCubed.L)a===d||plugCubed.L[a]===d||($("#plugcubed-btn-"+a).unbind(),delete plugCubed.L[a]);$("#plugcubed-css").remove();$("#plugcubed-js-extra").remove();$("#side-right").remove();
$("#side-left").remove();this.Q.remove();this.u.onclose=function(){};this.u.close();delete plugCubed},fa:function(){this.u=new SockJS("http://socket.plugpony.net:923/gateway");this.u.O=0;this.u.onopen=function(){this.O=0;this.send(JSON.stringify({type:"userdata",id:Models.user.data.id,username:Models.user.data.username,room:Models.room.data.id,version:plugCubed.version.toString()}))};this.u.onmessage=function(a){a=JSON.parse(a.data);"update"===a.type?(plugCubed.u.onclose=function(){},plugCubed.u.close(),
plugCubed.log(plugCubed.d("newVersion"),f,plugCubed.colors.D),setTimeout(function(){$.getScript("https://rawgithub.com/TATDK/plugCubed/1.7.0/plugCubed."+(plugCubed.oa?"min.":"")+"js")},5E3)):"chat"===a.type&&SocketListener.chat(a.data)};this.u.onclose=function(){this.O++;var a;if(5>this.O)a=5;else if(30>this.O)a=30;else if(60>this.O)a=60;else return;setTimeout(function(){plugCubed.fa()},1E3*a)}},da:function(){$("#side-left").show().animate({left:"0px"},300,"undefined"===typeof jQuery.easing.Da?d:
"easeOutQuart");this.R()&&(userlistShow===e&&$("#pdpUsers").hide(),$("#pdpUsersToggle").hide())},ma:function(){var a=-$("#side-left").width()-20;$("#side-left").animate({left:a+"px"},300,"undefined"===typeof jQuery.easing.Da?d:"easeOutQuart",function(){$("#side-left").hide()});this.R()&&(userlistShow===e&&$("#pdpUsers").show(),$("#pdpUsersToggle").show())},aa:{you:{title:"ranks.you",color:"FFDD6F"},regular:{title:"ranks.regular",color:"B0B0B0"},featureddj:{title:"ranks.featureddj",color:"E90E82"},
bouncer:{title:"ranks.bouncer",color:"E90E82"},manager:{title:"ranks.manager",color:"E90E82"},cohost:{title:"ranks.cohost",color:"E90E82"},host:{title:"ranks.host",color:"E90E82"},ambassador:{title:"ranks.ambassador",color:"9A50FF"},admin:{title:"ranks.admin",color:"42A5DC"},join:{title:"notify.join",color:"3366FF"},leave:{title:"notify.leave",color:"3366FF"},curate:{title:"notify.curate",color:"00FF00"},xa:{title:"notify.stats",color:"66FFFF"},za:{title:"notify.updates",color:"FFFF00"}},settings:{recent:g,
awaymsg:"",autowoot:g,autojoin:g,userlist:g,autorespond:g,menu:g,notify:g,customColors:g,J:e,I:e,q:[],M:[],ha:[],B:g,k:{enabled:g,limit:50},colors:{you:"FFDD6F",regular:"B0B0B0",featureddj:"E90E82",bouncer:"E90E82",manager:"E90E82",cohost:"E90E82",host:"E90E82",ambassador:"9A50FF",admin:"42A5DC",join:"3366FF",leave:"3366FF",curate:"00FF00",xa:"66FFFF",za:"FFFF00"},alerts:{join:g,leave:g,curate:g,wa:g,va:g}},Ja:function(){if(localStorage.qa!==d){var a=JSON.parse(localStorage.qa),b;for(b in this.settings)a[b]!==
d&&(this.settings[b]=a[b]);this.settings.recent=g;this.settings.autowoot&&this.Aa();this.settings.userlist&&(this.Z(),this.da());this.settings.customColors&&this.ya();0<this.settings.q.length&&-1<this.settings.q.indexOf(Models.room.data.media.id)&&(Playback.setVolume(0),this.settings.B=e,this.log(this.d("automuted",[Models.room.data.media.title]),f,this.colors.g));this.settings.J||(Emoji.H===d&&(Emoji.H=Emoji.emojify),Emoji.emojify=function(a){return a});this.settings.I||(avatarTick=function(){})}},
saveSettings:function(){localStorage.qa=JSON.stringify(this.settings)},ya:function(){this.settings.customColors?this.Q.text([".chat-message .chat-from,",".chat-mention .chat-from { color:#"+this.settings.colors.regular+"!important; }",".chat-message .chat-from-featureddj,",".chat-mention .chat-from-featureddj { color:#"+this.settings.colors.featureddj+"!important; }",".chat-message .chat-from-bouncer,",".chat-mention .chat-from-bouncer { color:#"+this.settings.colors.bouncer+"!important; }",".chat-message .chat-from-manager,",
".chat-mention .chat-from-manager { color:#"+this.settings.colors.manager+"!important; }",".chat-message .chat-from-cohost,",".chat-mention .chat-from-cohost { color:#"+this.settings.colors.cohost+"!important; }",".chat-message .chat-from-host,",".chat-mention .chat-from-host { color:#"+this.settings.colors.host+"!important; }",".chat-message .chat-from-ambassador,",".chat-mention .chat-from-ambassador { color:#"+this.settings.colors.ambassador+"!important; }",".chat-message .chat-from-admin,",".chat-mention .chat-from-admin { color:#"+
this.settings.colors.admin+"!important; }",".chat-message .chat-from-you,",".chat-mention .chat-from-you { color:#"+this.settings.colors.you+"!important; }"].join("\n")):this.Q.text("")},Fa:function(){API.addEventListener(API.DJ_ADVANCE,this.proxy.W);API.addEventListener(API.VOTE_UPDATE,this.proxy.onVoteUpdate);API.addEventListener(API.CURATE_UPDATE,this.proxy.V);API.addEventListener(API.USER_JOIN,this.proxy.X);API.addEventListener(API.USER_LEAVE,this.proxy.Y);API.addEventListener(API.CHAT,this.proxy.U);
API.addEventListener(API.VOTE_SKIP,this.proxy.z);API.addEventListener(API.USER_SKIP,this.proxy.z);API.addEventListener(API.MOD_SKIP,this.proxy.z);API.addEventListener(API.WAIT_LIST_UPDATE,this.proxy.i);API.addEventListener("userUpdate",this.proxy.i)},Ga:function(){$("#side-right .sidebar-content").html("");this.j(this.settings.autowoot,"woot",this.d("menu.autowoot"));this.j(this.settings.autojoin,"join",this.d("menu.autojoin"));this.j(this.settings.userlist,"userlist",this.d("menu.userlist"));this.j(this.settings.customColors,
"colors",this.d("menu.customchatcolors"));this.j(this.settings.autorespond,"autorespond",this.d("menu.afkstatus"));this.j(this.settings.notify,"notify",this.d("menu.notify"));this.j(this.settings.k.enabled,"chatlimit",this.d("menu.limitchatlog"));this.j(!DB.settings.streamDisabled,"stream",this.d("menu.stream"));this.j(this.settings.J,"emoji",this.d("menu.emoji"));this.j(this.settings.I,"avataranim",this.d("menu.avatarAnimations"))},j:function(a,b,c){this.L[b]===d&&(0<$("#side-right .sidebar-content").children().length&&
$("#side-right .sidebar-content").append("<hr />"),$("#side-right .sidebar-content").append('<a id="plugcubed-btn-'+b+'"><div class="status-'+(a?"on":"off")+'"></div>'+c+"</a>"),$("#plugcubed-btn-"+b).data("key",b).click(this.proxy.menu),this.L[b]={text:c})},f:function(a,b){$("#plugcubed-btn-"+a).find('[class^="status-"], [class*=" status-"]').attr("class","status-"+(b===e?"on":"off"))},Z:function(){0<$("#side-left .sidebar-content").children().length&&$("#side-left .sidebar-content").append("<hr />");
$("#side-left .sidebar-content").bind("contextmenu",function(){return g});$("#side-left .sidebar-content").html('<h1 class="users">Users: '+API.getUsers().length+"</h1>");var a=Models.room.getWaitListPosition(),a=$("<h3></h3>").addClass("waitlistspot").text("Waitlist: "+(a!==f?a+" / ":"")+Models.room.data.waitList.length);$("#side-left .sidebar-content").append(a).append("<hr />");var a=API.getUsers(),b;for(b in a)this.Ca(a[b])},log:function(a,b,c,h){var k="";c&&(k=' style="color:'+("#"===c.substr(0,
1)?c:"#"+c)+';"');a=b?'<div class="chat-message"><span class="chat-from"'+k+">"+b+'</span><span class="chat-text"'+k+">: "+a+"</span></div>":'<div class="chat-message"><span class="chat-text"'+k+">"+a+"</span></div>";$("#chat-messages");$("#chat-messages").scrollTop();$("#chat-messages").outerHeight();b=Popout?Popout.Chat.chatMessages:Chat.chatMessages;c=b.scrollTop()>b[0].scrollHeight-b.height()-20;b.append(a);c&&b.scrollTop(b[0].scrollHeight);h&&$(a).click(function(){this.childNodes[0].style.color=
h})},Ca:function(a){var b=Utils.cleanTypedString(a.username),c;c=a.curated==e?"curate":this.K(a.id)?"plugcubed":this.na(a.id)?"vip":Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.FEATUREDDJ?"fdj":Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.BOUNCER?"bouncer":Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.MANAGER?"manager":Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.COHOST?"host":Models.room.data.staff[a.id]&&
5==Models.room.data.staff[a.id]?"host":Models.room.ambassadors[a.id]?"ambassador":Models.room.admins[a.id]?"admin":"normal";0<Models.room.data.djs.length&&Models.room.data.djs[0].user.id==a.id?"normal"===c?this.P("void","#66FFFF",b):this.P(c+"_current","#66FFFF",b):"normal"===c?this.P("void",this.ja(a.vote),b):this.P(c+this.Ra(a.vote),this.ja(a.vote),b)},ja:function(a){var b="";if(a===d)b="FFFFFF";else switch(a){case -1:b="ED1C24";break;case 1:b="3FFF00";break;default:b="FFFFFF"}return"#"+b},Ra:function(a){var b=
"";if(a===d)b="undecided";else switch(a){case -1:b="meh";break;case 1:b="woot";break;default:b="undecided"}return"_"+b},P:function(a,b,c){$("#side-left .sidebar-content").append($("<p></p>").append($("<span></span>").append($("<span></span>").addClass(a)).css("cursor","pointer").css("color",b).mousedown(function(a){switch(a.which){case 1:$("#chat-input-field").val($("#chat-input-field").val()+"@"+c+" ").focus();break;case 3:(Models.room.data.staff[Models.user.data.id]&&Models.room.data.staff[Models.user.data.id]>=
Models.user.BOUNCER||plugCubed.K(Models.user.data.id))&&plugCubed.T(c)}}).html(function(a,b){return b+c})))},getUser:function(a){a=a.trim();"@"===a.substr(0,1)&&(a=a.substr(1));var b=API.getUsers(),c;for(c in b)if(("string"!==typeof a?0:b[c].username.toLowerCase()===a.toLowerCase())||("string"!==typeof a?0:b[c].id.toLowerCase()===a.toLowerCase()))return b[c];return f},ba:function(a,b){if(Models.room.data.staff[Models.user.data.id]&&Models.room.data.staff[Models.user.data.id]>=Models.user.BOUNCER){var c;
switch(b){case "kick":c=ModerationKickUserService;break;case "removedj":c=ModerationRemoveDJService;break;case "adddj":c=ModerationAddDJService;break;default:log(this.d("error.unknownModeration"));return}var h=this.getUser(a);h===f?log(this.d("error.userNotFound")):new c(h.id," ")}},T:function(a){a=this.getUser(a);if(a===f)log(this.d("error.userNotFound"));else{var b,c,h,k,r=a.djPoints+a.curatorPoints+a.listenerPoints,l=a.A+a.F;c=Models.room.getWaitListPosition(a.id);var m=-1;b=Models.room.data.staff[a.id]&&
Models.room.data.staff[a.id]==Models.user.FEATUREDDJ?this.d("ranks.featureddj"):Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.BOUNCER?this.d("ranks.bouncer"):Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.MANAGER?this.d("ranks.manager"):Models.room.data.staff[a.id]&&Models.room.data.staff[a.id]==Models.user.COHOST?this.d("ranks.cohost"):Models.room.data.staff[a.id]&&5==Models.room.data.staff[a.id]?this.d("ranks.host"):Models.room.ambassadors[a.id]?
this.d("ranks.ambassador"):Models.room.admins[a.id]?this.d("ranks.admin"):this.d("ranks.regular");if(c===f)if(0<Models.room.data.djs.length&&Models.room.data.djs[0].user.id===a.id)k=this.d("info.djing"),m=0;else{for(c=1;c<Models.room.data.djs.length;c++)m=Models.room.data.djs[c].user.id===a.id?c:m;k=0>m?this.d("info.notinlist"):this.d("info.inbooth",[m+1,Models.room.data.djs.length])}else k=this.d("info.inwaitlist",[c,Models.room.data.waitList.length]);switch(a.status){case -1:c=this.d("status.idle");
break;default:c=this.d("status.available");break;case 1:c=this.d("status.afk");break;case 2:c=this.d("status.working");break;case 3:c=this.d("status.sleeping")}switch(a.vote){case -1:h=this.d("vote.meh");break;default:h=this.d("vote.undecided");break;case 1:h=this.d("vote.woot")}0===m&&(h=this.d("vote.djing"));m=d;this.K(a.id)&&(m=this.d("info.specialTitles.developer"));this.na(a.id)&&(m=this.d("info.specialTitles.vip"));log('<table style="width:100%;color:#CC00CC"><tr><td colspan="2"><strong>'+this.d("info.name")+
'</strong>: <span style="color:#FFFFFF">'+a.username+"</span></td></tr>"+(m?'<tr><td colspan="2"><strong>'+this.d("info.title")+'</strong>: <span style="color:#FFFFFF">'+m+"</span></td></tr>":"")+'<tr><td colspan="2"><strong>'+this.d("info.id")+'</strong>: <span style="color:#FFFFFF">'+a.id+"</span></td></tr><tr><td><strong> "+this.d("info.rank")+'</strong>: <span style="color:#FFFFFF">'+b+"</span></td><td><strong>"+this.d("info.joined")+'</strong>: <span style="color:#FFFFFF">'+a.joinTime+"</span></td></tr><tr><td><strong>"+
this.d("info.status")+'</strong>: <span style="color:#FFFFFF">'+c+"</span></td><td><strong> "+this.d("info.vote")+'</strong>: <span style="color:#FFFFFF">'+h+'</span></td></tr><tr><td colspan="2"><strong>'+this.d("info.position")+'</strong>: <span style="color:#FFFFFF">'+k+"</span></td></tr><tr><td><strong>"+this.d("info.points")+'</strong>: <span style="color:#FFFFFF" title = "'+this.d("info.pointType.dj",[a.djPoints])+"  +  "+this.d("info.pointType.listener",[a.listenerPoints])+"  +  "+this.d("info.pointType.curator",
[a.curatorPoints])+'">'+r+"</span></td><td><strong> "+this.d("info.fans")+'</strong>: <span style="color:#FFFFFF">'+a.fans+"</span></td></tr><tr><td><strong>"+this.d("info.wootCount")+'</strong>: <span style="color:#FFFFFF">'+a.A+"</span></td><td><strong>"+this.d("info.mehCount")+'</strong>: <span style="color:#FFFFFF">'+a.F+'</span></td></tr><tr><td colspan="2"><strong>'+this.d("info.ratio")+'</strong>: <span style="color:#FFFFFF">'+(0===l?"0":(a.A/l).toFixed(2))+"</span></td></tr></table>")}},onMenuClick:function(a){a=
$(a.currentTarget).data("key");switch(a){case "woot":this.settings.autowoot=!this.settings.autowoot;this.f("woot",this.settings.autowoot);this.settings.autowoot&&$("#button-vote-positive").click();break;case "join":this.settings.autojoin=!this.settings.autojoin;this.f("join",this.settings.autojoin);this.settings.autojoin&&0<$("#button-dj-waitlist-join").length&&API.waitListJoin();break;case "userlist":this.settings.userlist=!this.settings.userlist;this.f("userlist",this.settings.userlist);this.settings.userlist?
(this.Z(),this.da()):($("#side-left .sidebar-content").empty(),this.ma());break;case "colors":Dialog.closeDialog();a=$("<form/>").submit("return false").append(Dialog.getCheckBox("Enable custom","enabled",this.settings.customColors));var b=0,c;for(c in this.aa)a.append($(Dialog.getInputField(c,this.d(this.aa[c].title),this.aa[c].color,this.settings.colors[c],6).css("top",30*++b)).change(function(){$(this).find(".dialog-input-label").css("color","#"+$(this).find("input").val())}));a=$("<div/>").addClass("dialog-body").append(a);
for(c in this.settings.colors)a.find('input[name="'+c+'"]').parents(".dialog-input-container").find(".dialog-input-label").css("color","#"+this.settings.colors[c]);Dialog.context="isCustomChatColors";Dialog.submitFunc=$.proxy(this.Ma,this);return Dialog.showDialog($("<div/>").attr("id","dialog-custom-colors").addClass("dialog").css("left",Main.LEFT+(Main.WIDTH-230)/2).css("top",208.5).append(Dialog.getHeader("Custom Chat Colors")).append(a).append($("<div/>").addClass("dialog-button dialog-default-button").click($.proxy(this.La,
this)).append($("<span/>").text("Default"))).append(Dialog.getCancelButton()).append(Dialog.getSubmitButton(Lang.dialog.save)));case "autorespond":this.settings.autorespond=!this.settings.autorespond;this.f("autorespond",this.settings.autorespond);if(this.settings.autorespond){a=prompt("Please enter your away message here.\nThis is what you will reply via @mention.",""===this.settings.awaymsg?this.la:this.settings.awaymsg);if(a===f){this.settings.autorespond=g;this.f("autorespond",g);return}a=a.split("@").join("").trim();
this.settings.awaymsg=""===a?this.la:a;0>=Models.user.data.status&&Models.user.changeStatus(1)}else Models.user.changeStatus(0);break;case "notify":return Dialog.closeDialog(),Dialog.context="isNotifySettings",Dialog.submitFunc=$.proxy(this.Qa,this),Dialog.showDialog($("<div/>").attr("id","dialog-notify").addClass("dialog").css("left",Main.LEFT+(Main.WIDTH-230)/2).css("top",208.5).append(Dialog.getHeader(this.d("notify.header"))).append($("<div/>").addClass("dialog-body").append($("<form/>").submit("return false").append(Dialog.getCheckBox(this.d("enable"),
"enabled",this.settings.notify).css("top",10).css("left",10)).append(Dialog.getCheckBox(this.d("notify.join"),"join",this.settings.alerts.join).css("top",30).css("left",30)).append(Dialog.getCheckBox(this.d("notify.leave"),"leave",this.settings.alerts.leave).css("top",50).css("left",30)).append(Dialog.getCheckBox(this.d("notify.curate"),"curate",this.settings.alerts.curate).css("top",70).css("left",30)).append(Dialog.getCheckBox(this.d("notify.stats"),"songStats",this.settings.alerts.va).css("top",
90).css("left",30)).append(Dialog.getCheckBox(this.d("notify.updates"),"songUpdate",this.settings.alerts.wa).css("top",110).css("left",30)))).append(Dialog.getCancelButton()).append(Dialog.getSubmitButton(Lang.dialog.save)));case "chatlimit":return Dialog.closeDialog(),Dialog.context="isChatLimitSettings",Dialog.submitFunc=$.proxy(this.Ka,this),Dialog.showDialog($("<div/>").attr("id","dialog-chat-limit").addClass("dialog").css("left",Main.LEFT+(Main.WIDTH-230)/2).css("top",208.5).append(Dialog.getHeader(this.d("chatLimit.header"))).append($("<div/>").addClass("dialog-body").append($("<form/>").submit("return false").append(Dialog.getCheckBox(this.d("enable"),
"enabled",this.settings.k.enabled).css("top",10).css("left",10)).append(Dialog.getInputField(this.d("chatLimit.limit"),"Limit",0,this.settings.k.limit).css("top",30).css("left",10)))).append(Dialog.getCancelButton()).append(Dialog.getSubmitButton(Lang.dialog.save)));case "stream":return this.f("stream",DB.settings.streamDisabled),API.sendChat(DB.settings.streamDisabled?"/stream on":"/stream off");case "emoji":this.settings.J=!this.settings.J;this.f("emoji",this.settings.J);if(this.settings.J){if(Emoji.H===
d)return this.log(this.d("error.emoji"),f,this.colors.pa);Emoji.emojify=Emoji.H}else Emoji.H===d&&(Emoji.H=Emoji.emojify),Emoji.emojify=function(a){return a};break;case "avataranim":this.settings.I=!this.settings.I;plugCubed.f("avataranim",plugCubed.settings.I);avatarTick=this.settings.I?_avatarTick:function(){};avatarTick(0);break;default:return log(this.d("menu.unknown"))}this.saveSettings()},Qa:function(){this.settings.notify=$("#dialog-checkbox-enabled").is(":checked");for(var a in this.settings.alerts)this.settings.alerts[a]=
$("#dialog-checkbox-"+a).is(":checked");this.f("notify",this.settings.notify);this.saveSettings();Dialog.closeDialog()},Ka:function(){this.settings.k.enabled=$("#dialog-checkbox-enabled").is(":checked");this.settings.k.limit=~~$('input[name="chat-limit"]').val();this.f("chatlimit",this.settings.k.enabled);if(this.settings.k.enabled){var a=$("#chat-messages").children("div"),b=a.length,c=0;a.each(function(){++c<b-plugCubed.settings.k.limit&&$(this).remove()})}this.saveSettings();Dialog.closeDialog()},
La:function(){for(var a in this.settings.colors){var b=$('input[name="'+a+'"]');b.val(b.data("ph"));b.parents(".dialog-input-container").find(".dialog-input-label").css("color","#"+b.val())}},Ma:function(){this.settings.customColors=$("#dialog-checkbox-enabled").is(":checked");for(var a in this.settings.colors){var b=$('input[name="'+a+'"]'),c=this.settings.colors,h=a,k;if(!(k=""===b.val()))k=b.val(),k=!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test("#"===k.substr(0,1)?k:"#"+k);c[h]=k?b.data("ph"):b.val()}this.ya();
this.f("colors",this.settings.customColors);this.saveSettings();Dialog.closeDialog()},onVoteUpdate:function(a){if(a&&a.user){var b=Models.room.userHash[a.user.id];this.i();1===b.C?b.A--:-1===b.C&&b.F--;1===a.vote?b.A++:-1===a.vote&&b.F++;b.C=a.vote}},V:function(a){var b=API.getMedia();this.settings.notify===e&&this.settings.alerts.curate===e&&this.log(this.d("notify.message.curate",[a.user.username,b.author,b.title]),f,this.settings.colors.curate);Models.room.userHash[a.user.id].curated=e;this.i()},
W:function(a){this.settings.notify===e&&(this.settings.alerts.va===e&&this.log(this.d("nofity.message.stats",[a.lastPlay.score.positive,a.lastPlay.score.negative,a.lastPlay.score.curates]),f,this.settings.colors.xa),this.settings.alerts.wa===e&&this.log(this.d("notify.message.updates",[a.media.title,a.media.author,a.dj.username]),f,this.settings.colors.za));setTimeout($.proxy(this.Na,this),1E3*Math.Sa());(Models.user.getPermission()>=Models.user.BOUNCER||this.K(Models.user.data.id))&&this.Oa(a.media.id);
plugCubed.history.unshift({id:a.media.id,author:a.media.author,title:a.media.title,ea:g,user:{id:a.dj.id,username:a.dj.username}});plugCubed.history.splice(50,plugCubed.history.length-50);this.settings.B&&0>this.settings.q.indexOf(a.media.id)&&(setTimeout(function(){Playback.setVolume(Playback.lastVolume)},800),this.settings.B=g);!this.settings.B&&-1<this.settings.q.indexOf(a.media.id)&&(setTimeout(function(){Playback.setVolume(0)},800),this.settings.B=e,this.log(i18n("automuted",[a.media.title]),
f,this.colors.g));this.i();a=API.getUsers();for(var b in a)a[b].C=0},Na:function(){this.settings.autowoot&&0>this.settings.q.indexOf(Models.room.data.media.id)&&this.Aa();if("block"===$("#button-dj-waitlist-join").css("display")&&this.settings.autojoin)Room.onWaitListJoinClick()},Aa:function(){if(!(Models.room.data.djs===d||0===Models.room.data.djs.length)){var a=Models.room.data.djs[0];a===f||a==API.getSelf()||$("#button-vote-positive").click()}},X:function(a){this.settings.notify===e&&this.settings.alerts.join===
e&&this.log(Utils.cleanTypedString(a.username+" joined the room"),f,this.settings.colors.join);a=Models.room.userHash[a.id];a.A===d&&(a.A=0);a.F===d&&(a.F=0);a.C===d&&(a.C=0);a.joinTime===d&&(a.joinTime=this.S());this.i()},Y:function(a){this.settings.notify===e&&this.settings.alerts.leave===e&&this.log(Utils.cleanTypedString(a.username+" left the room"),f,this.settings.colors.leave);this.i()},K:function(a){return"50aeb31696fba52c3ca0adb6"==a||"50aeb077877b9217e2fbff00"==a},na:function(a){return"5112c273d6e4a94ec0554792"==
a||"50b1961c96fba57db2230417"==a},ia:function(a){var b=0>a.message.indexOf("@")&&this.K(a.fromID);if("mention"==a.type&&Models.room.data.staff[a.fromID]&&Models.room.data.staff[a.fromID]>=Models.user.BOUNCER||b)-1<a.message.indexOf("!disable")&&(this.settings.autojoin?(this.settings.autojoin=g,this.f("join",this.settings.autojoin),this.saveSettings(),API.waitListLeave(),API.sendChat("@"+a.from+" Autojoin disabled")):API.sendChat("@"+a.from+" Autojoin was not enabled")),-1<a.message.indexOf("!afkdisable")&&
(this.settings.autorespond?(this.settings.autorespond=g,this.f("autorespond",this.settings.autorespond),this.saveSettings(),API.sendChat("@"+a.from+" AFK message disabled")):API.sendChat("@"+a.from+" AFK message was not enabled"))},U:function(a){this.ia(a);if("mention"==a.type)this.settings.autorespond&&!this.settings.recent&&(this.settings.recent=e,setTimeout(function(){plugCubed.settings.recent=g;plugCubed.saveSettings()},18E4),API.sendChat("@"+a.from+" "+this.settings.awaymsg));else for(var b in this.settings.ha)-1<
a.message.indexOf(this.settings.ha[b])&&document.getElementById("chat-sound").playMentionSound();if(this.settings.k.enabled){a=$("#chat-messages").children("div");var c=a.length;b=0;a.each(function(){++b;var a=c-plugCubed.settings.k.limit-1;b<a?$(this).remove():b==a&&0==b%2&&$(this).remove()})}},i:function(){this.settings.userlist&&this.Z()},Ea:function(){(new HistorySelectService).successCallback=$.proxy(this.Ia,this)},Ia:function(a){this.history=[];for(var b in a){var c=a[b];this.history.push({id:c.media.id,
author:c.media.author,title:c.media.title,ea:g,user:{id:c.user.id.toString(),username:c.user.username}})}},z:function(){this.history[1].ea=e},Oa:function(a){var b=-1,c;for(c in this.history){var h=this.history[c];if(h.id==a&&51>~~c+2&&(b=~~c+2,!h.ea))return Popout==f||Popout==d?(document.getElementById("chat-sound").playMentionSound(),setTimeout(function(){document.getElementById("chat-sound").playMentionSound()},100)):(Popout.document.getElementById("chat-sound").playMentionSound(),setTimeout(function(){Popout.document.getElementById("chat-sound").playMentionSound()},
100)),Models.chat.onChatReceived({type:"system",message:"Song is in history ("+b+" of "+this.history.length+")",language:Models.user.data.language})}if(0<b)return Models.chat.onChatReceived({type:"system",message:"Song is in history ("+b+" of "+this.history.length+"), but was skipped on the last play",language:Models.user.data.language})},S:function(){var a=new Date,b=a.getMinutes();return a.getHours()+":"+((10>b?"0":"")+b)},ka:function(a){if(this.G(a)===e)return("/stream on"==a||"/stream off"==a)&&
plugCubed.f("stream",!DB.settings.streamDisabled),"/afk"==a&&plugCubed.settings.autojoin&&(plugCubed.settings.autojoin=g,plugCubed.f("join",g),plugCubed.saveSettings()),e;if(0===a.indexOf("/commands")){a=[["/nick","change username"],["/idle","set status to idle"],["/avail","set status to available"],["/afk","set status to afk"],["/work","set status to working"],["/sleep","set status to sleeping"],["/join","join dj booth/waitlist"],["/leave","leaves dj booth/waitlist"],["/whoami","get your own information"],
["/mute","set volume to 0"],["/automute","register currently playing song to automatically mute on future plays"],["/unmute","set volume to last volume"],["/woot","woots current song"],["/meh","mehs current song"],["/refresh","refresh the video"],["/ignore (username)","ignore all chat messages from user"],["/alertson (word)","play mention sound whenever word is written in chat"],["/curate","add current song to your selected playlist"],["/getpos","get current waitlist position"],["/version","displays version number"],
["/commands","shows this list"],["/link","paste link to plugCubed website in chat"]];var b="<table>",c;for(c in a)b+="<tr><td>"+a[c][0]+"</td><td>"+a[c][1]+"</td></tr>";b+="</table>";if(Models.user.hasPermission(Models.user.BOUNCER)){a=[["/whois (username)","gives general information about user",Models.user.BOUNCER],["/skip","skip current song",Models.user.BOUNCER],["/kick (username)","kicks targeted user",Models.user.BOUNCER],["/lock","locks DJ booth",Models.user.MANAGER],["/unlock","unlocks DJ booth",
Models.user.MANAGER],["/add (username)","adds targeted user to dj booth/waitlist",Models.user.BOUNCER],["/remove (username)","removes targeted user from dj booth/waitlist",Models.user.BOUNCER]];var h="<table>";for(c in a)Models.user.hasPermission(a[c][2])&&(h+="<tr><td>"+a[c][0]+"</td><td>"+a[c][1]+"</td></tr>");Dialog.ta(b,h+"</table>")}else Dialog.ta(b);return e}if("/idle"==a)return Models.user.changeStatus(-1),e;if("/avail"==a||"/available"==a)return Models.user.changeStatus(0),e;if("/brb"==a||
"/away"==a)return Models.user.changeStatus(1),plugCubed.settings.autojoin&&(plugCubed.settings.autojoin=g,plugCubed.f("join",g),plugCubed.saveSettings()),e;if("/work"==a||"/working"==a)return Models.user.changeStatus(2),e;if("/sleep"==a||"/sleeping"==a)return Models.user.changeStatus(3),plugCubed.settings.autojoin&&(plugCubed.settings.autojoin=g,plugCubed.f("join",g),plugCubed.saveSettings()),e;if("/join"==a)return Room.onWaitListJoinClick(),e;if("/leave"==a)return API.waitListLeave(),e;if("/whoami"==
a)return plugCubed.T(Models.user.data.id),e;if("/woot"==a)return $("#button-vote-positive").click(),e;if("/meh"==a)return $("#button-vote-negative").click(),e;if("/refresh"==a)return $("#button-refresh").click(),e;if("/version"==a)return plugCubed.log(this.d("running",[plugCubed.version.toString()]),f,plugCubed.colors.D),e;if("/mute"==a)return Playback.setVolume(0),e;if("/link"==a)return Models.chat.sendChat("plugCubed : http://tatdk.github.io/plugCubed"),e;if("/unmute"==a)return Playback.setVolume(Playback.lastVolume),
e;if(plugCubed.R()&&"/muteone"==a||plugCubed.R()&&"/singlemute"==a)return $("#button-sound").click(),$("#button-sound").click(),e;if(0===a.indexOf("/nick "))return Models.user.changeDisplayName(a.substr(6)),e;if(0===a.indexOf("/curate"))return new DJCurateService(Models.playlist.selectedPlaylistID),setTimeout(function(){Dialog.closeDialog()},500),e;if("/nextsong"==a){a=Models.playlistMedia(Models.playlist.selectedPlaylistID).data[0];a.id===Models.room.data.media.id&&Models.room.data.currentDJ===Models.user.data.id&&
(a=Models.playlistMedia(Models.playlist.selectedPlaylistID).data[1]);b=-1;for(c in plugCubed.history)if(plugCubed.history[c].id==a.id&&51>~~c+1){b=~~c+1;break}return 0<b?(log('<span style="color:'+plugCubed.colors.D+'">'+plugCubed("nextsong",[a.title,a.author])+'</span><br /><span style="color:'+plugCubed.colors.pa+'"><strong>'+plugCubed.d("isHistory",[b,plugCubed.history.length])+"</strong></span>"),e):(plugCubed.log(plugCubed("nextsong",[a.title,a.author]),f,plugCubed.colors.D),e)}if("/automute"==
a)return 0>plugCubed.settings.q.indexOf(Models.room.data.media.id)?(plugCubed.settings.q.push(Models.room.data.media.id),plugCubed.settings.B=e,Playback.setVolume(0),plugCubed.log(Models.room.data.media.title+" registered to auto-mute on future plays.",f,plugCubed.colors.g)):(plugCubed.settings.q.splice(plugCubed.settings.q.indexOf(Models.room.data.media.id),1),plugCubed.settings.B=g,Playback.setVolume(Playback.lastVolume),plugCubed.log(Models.room.data.media.title+" removed from automute registry.",
f,plugCubed.colors.g)),plugCubed.saveSettings(),e;if("/alertsoff"==a)return plugCubed.settings.notify&&(plugCubed.log(plugCubed.d("notify.message.disabled"),f,plugCubed.colors.D),plugCubed.settings.notify=g,plugCubed.f("notify",g)),e;if("/alertson"==a)return plugCubed.settings.notify||(plugCubed.log(plugCubed.d("notify.message.enabled"),f,plugCubed.colors.D),plugCubed.settings.notify=e,plugCubed.f("notify",e)),e;if(0===a.indexOf("/getpos")){c=plugCubed.getUser(a.substr(8));a=c===f?Models.user.data:
c;b=Models.room.getWaitListPosition(a.id);if(b!==f)plugCubed.log(plugCubed.d("info.inwaitlist",[b,Models.room.data.waitList.length]),f,plugCubed.colors.g);else{b=-1;for(c=0;c<Models.room.data.djs.length;c++)b=Models.room.data.djs[c].user.id===a.id?c:b;0>b?plugCubed.log(plugCubed.d("info.notinlist"),f,plugCubed.colors.g):0===b?plugCubed.log(plugCubed.d("info.userDjing",[a.id===Models.user.data.id?plugCubed.d("you"):a.username]),f,plugCubed.colors.g):1===b?plugCubed.log(plugCubed.d("info.userNextDJ",
[a.id===Models.user.data.id?plugCubed.d("you"):a.username]),f,plugCubed.colors.g):plugCubed.log(plugCubed.d("info.inbooth",[b+1,Models.room.data.djs.length]),f,plugCubed.colors.g)}return e}if(0===a.indexOf("/ignore ")||0===a.indexOf("/unignore "))return a=plugCubed.getUser(a.substr(8)),a===f?(plugCubed.log(plugCubed.d("error.userNotFound"),f,plugCubed.colors.g),e):a.id===Models.user.data.id?(plugCubed.log(plugCubed.d("error.ignoreSelf"),f,plugCubed.colors.g),e):-1<plugCubed.settings.M.indexOf(a.id)?
(plugCubed.settings.M.splice(plugCubed.settings.M.indexOf(a.id),1),plugCubed.saveSettings(),log(plugCubed.d("ignore.disabled",[a.username])),e):(plugCubed.settings.M.push(a.id),plugCubed.saveSettings(),log(plugCubed.d("ignore.enabled",[a.username])),e);if(plugCubed.K(Models.user.data.id)&&0===a.indexOf("/whois "))return plugCubed.T(a.substr(7)),e;if(Models.user.hasPermission(Models.user.BOUNCER)){if(0===a.indexOf("/skip")){if(Models.room.data.djs[0].user.id==Models.user.data.id)Room.onSkipClick();
else c=a.substr(5).trim(),a=plugCubed.getUser(Models.room.data.currentDJ),c&&API.sendChat((a!=f?"@"+a.username+" - ":"")+"Reason for skip: "+c),new ModerationForceSkipService;return e}if(0===a.indexOf("/whois "))return plugCubed.T(a.substr(7)),e;if(0===a.indexOf("/kick "))if(0<a.indexOf("::")){c=a.substr(6).split(":: ");b=60;if(2==c.length)return!isNaN(parseInt(c[1],10))&&isFinite(c[1])&&(b=parseFloat(c[1])),a=plugCubed.getUser(c[0]),new ModerationKickUserService(a.id,!isNaN(parseInt(c[1],10))&&isFinite(c[1])?
" ":c[1],b),e;if(3==c.length)return b=parseFloat(c[2]),a=plugCubed.getUser(c[0]),new ModerationKickUserService(a.id,c[1],b),e}else return plugCubed.ba(a.substr(6),"kick"),e;if(0===a.indexOf("/add "))return plugCubed.ba(a.substr(5),"adddj"),e;if(0===a.indexOf("/remove "))return plugCubed.ba(a.substr(8),"removedj"),e}if(Models.user.hasPermission(Models.user.MANAGER)){if("/lock"===a)return new RoomPropsService(document.location.href.split("/")[3],e,Models.room.data.waitListEnabled,Models.room.data.maxPlays,
Models.room.data.maxDJs),e;if("/unlock"===a)return new RoomPropsService(document.location.href.split("/")[3],g,Models.room.data.waitListEnabled,Models.room.data.maxPlays,Models.room.data.maxDJs),e}return g}});
if(localStorage.ca===d){var plugCubed=f;new (Class.extend({init:function(){$("#overlay-container").append($("#avatar-overlay").clone(g,g).attr("id","plugCubedLang-overlay").width(800).height(600).css("position","absolute"));$("#plugCubedLang-overlay").find(".overlay-title").html("plug&#179; language");$("#plugCubedLang-overlay").find("#avatar-sets").remove();$("#plugCubedLang-overlay").find("#avatar-panel").attr("id","plugCubedLang-panel").css("padding-top","60px");$("#plugCubedLang-overlay").find(".overlay-close-button").click($.proxy(this.hide,
this));this.Ha()},show:function(){UserListOverlay.hide();$("#lobby-overlay").hide();$("#media-overlay").hide();$("#avatar-overlay").hide();$("#plugCubedLang-overlay").show();$("#overlay-container").show();this.draw()},hide:function(){UserListOverlay.hide();$("#lobby-overlay").hide();$("#media-overlay").hide();$("#avatar-overlay").hide();$("#plugCubedLang-overlay").hide();$("#overlay-container").hide()},draw:function(){$("#plugCubedLang-panel").html("").scrollTop(0);var a=this.N.length,b=$("<div/>");
if(5<a)for(var c=0;c<a/5;c++)b.append(this.drawRow(this.N.slice(5*c,5*c+5)).css("top",75*c));else b.append(this.drawRow(this.N).css("top",75*c));$("#plugCubedLang-panel").append(b);$(".lang-button").click($.proxy(this.Pa,this))},drawRow:function(a){for(var b=$("<div/>").addClass("lang-row"),c=a.length,h=5==c?0:4==c?75:3==c?150:2==c?225:300,k=0;k<c;++k){var r=$("<div/>").addClass("lang-button").css("display","inline-block").css("left",h).data("language",a[k].file).css("cursor","pointer").append($("<img/>").attr("src",
"https://rawgithub.com/TATDK/plugCubed/1.7.0/flags/flag."+a[k].file+".png").attr("alt",a[k].name).height(75).width(150));b.append(r);h+=150}return b},Pa:function(a){a=$(a.currentTarget);localStorage.ca=a.data("language");plugCubed=new u;this.hide()},Ha:function(){var a=this;this.N=[];$.getJSON("https://rawgithub.com/TATDK/plugCubed/1.7.0/lang.txt",function(b){a.N=b;a.show()}).done(function(){0===a.N.length&&log('<span style="color:#FF0000">Error loading plugCubed</span>')})}}))}else plugCubed=new u;
plugCubed.oa=e;
//# sourceMappingURL=https://rawgithub.com/TATDK/plugCubed/1.7.0/plugCubed.min.js.map 
